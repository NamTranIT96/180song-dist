(function(t){function e(e){for(var a,s,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),o=n.n(a);o.a},"15de":function(t,e,n){},"2e99":function(t,e,n){"use strict";var a=n("15de"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("home")],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_main,expression:"loading_main"}],staticStyle:{padding:"20px","padding-left":"48px","padding-right":"48px","margin-top":"8px"}},[t._m(0),n("div",{staticClass:"button-middle",class:{hidden:""===t.listGenreActive}},[n("el-button",{attrs:{type:"success",icon:"el-icon-close",size:"medium",round:""},on:{click:function(e){return t.clearAllGenres()}}},[t._v("Clear all genre ")])],1),n("div",{staticClass:"list-music-genre"},t._l(t.list_music_genre,(function(e,a){return n("div",{key:a,staticClass:"item-music-genre",class:{active:e.active},on:{click:function(n){return t.changeStatus(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0),t._m(1),n("div",{staticClass:"button-middle",class:{hidden:""===t.listGenreActive}},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"medium",round:""},on:{click:function(e){return t.createPlayList()}}},[t._v(" Create Play List ")])],1),""!=t.listGenreDeactive?n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading_get_data,expression:"loading_get_data"}],staticClass:"list-recommended-song"},t._l(t.list_recommended_song,(function(e,a){return n("div",{key:a,staticClass:"item-recommended-song"},[n("img",{attrs:{src:e.album.images[0].url}}),n("div",{staticClass:"content"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"button-control"},[n("el-button",{attrs:{icon:"el-icon-headset",type:"success",size:"mini",circle:""},on:{click:function(n){return t.listenSong(e.uri)}}})],1)])})),0),n("div",{staticClass:"mt-20",staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.viewMoreSong()}}},[t._v("View more")])],1)]):n("div",{staticClass:"text-center"},[t._v(" Please choose your genre :D ")])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title-section"},[t._v(" Select your favorite genres ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title-section mt-20"},[t._v(" Enjoy your never-listen-to songs ")])])}],c=(n("4160"),n("a15b"),n("fb6a"),n("b0c0"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("0b16")),l="https://180songs.com/",u=l,d=n("bc3a");c["URLSearchParams"]=URLSearchParams;var f={name:"Home",data:function(){return{list_music_genre:[],token_info:{},list_recommended_song:[],loading_get_data:!1,pagination:0,info_user:{},loading_main:!1}},computed:{listGenreDeactive:function(){var t=[],e=!1;return this.list_music_genre.forEach((function(n){n.active?e=!0:t.push(n.name)})),e?t:[]},listGenreActive:function(){var t=[];return this.list_music_genre.forEach((function(e){e.active&&t.push(e.name)})),t.join(" + ")}},watch:{listGenreDeactive:function(t){this.getTrackByCategory()}},methods:{createPlayList:function(){var t=this,e=localStorage.getItem("access_token_180song"),n="Bearer "+e,a="https://api.spotify.com/v1/users/".concat(t.info_user.id,"/playlists"),o=new Date,i={name:"Play list 180 degree different with genres: "+t.listGenreActive+" "+o.toLocaleDateString(),description:"Play list 180 degree different with genres:  "+t.listGenreActive+" "+o.toLocaleDateString(),public:!0};t.loading_main=!0,d.post(a,JSON.stringify(i),{headers:{Authorization:n}}).then((function(e){e.data&&t.addSongToPlayList(e.data)})).catch((function(e){t.loading_main=!1,localStorage.removeItem("access_token_180song"),t.login()}))},addSongToPlayList:function(t){var e=this,n=localStorage.getItem("access_token_180song"),a="Bearer "+n,o="https://api.spotify.com/v1/playlists/".concat(t.id,"/tracks?uris="),i=[];e.list_recommended_song.forEach((function(t){t.uri&&i.push(encodeURIComponent(t.uri))}));var s=i.join(","),r=o+s;d.post(r,{},{headers:{Authorization:a,Accept:"application/json"}}).then((function(n){n.data&&(e.$notify({title:"Success",message:"Add play list successfully",type:"success"}),window.location.href=t.uri),e.loading_main=!1})).catch((function(t){e.loading_main=!1,localStorage.removeItem("access_token_180song")}))},viewMoreSong:function(){this.pagination+=1,this.getTrackByCategory(!0)},clearAllGenres:function(){this.list_music_genre.forEach((function(t){t.active=!1}))},listenSong:function(t){window.open(t)},changeStatus:function(t){t.active=!t.active,this.$forceUpdate()},getData:function(){var t=this,e=localStorage.getItem("access_token_180song"),n="Bearer "+e;d.get("https://api.spotify.com/v1/recommendations/available-genre-seeds",{headers:{Authorization:n}}).then((function(e){if(e.data.genres){var n=[];e.data.genres.forEach((function(t){var e={name:t,active:!1};n.push(e)})),n.length>0&&(n[0].active=!0),t.$set(t,"list_music_genre",n)}})).catch((function(e){localStorage.removeItem("access_token_180song"),t.login()})),t.getInfoUser(),t.getTrackByCategory()},getInfoUser:function(){var t=this,e=this,n=localStorage.getItem("access_token_180song"),a="Bearer "+n;d.get("https://api.spotify.com/v1/me",{headers:{Authorization:a}}).then((function(n){n.data&&(e.$set(e,"info_user",n.data),t.$root.$emit("getUserInfo",n.data))})).catch((function(t){localStorage.removeItem("access_token_180song"),e.login()}))},login:function(){var t=localStorage.getItem("access_token_180song");if(null==t){var e="0d29de0cd00a48389701b9ec2fa89434",n="playlist-modify-public",a=u;window.location.href="https://accounts.spotify.com/authorize?response_type=code&client_id="+e+(n?"&scope="+encodeURIComponent(n):"")+"&redirect_uri="+encodeURIComponent(a)}else this.getData()},checkData:function(){var t=this,e=new URL(window.location.href),n=e.searchParams.get("code");if(n){var a="0d29de0cd00a48389701b9ec2fa89434",o="3d178f1e3dc34fd9aaebe2712a6cced4",i=u,s=window.btoa(a+":"+o),r="Basic "+s,c=new URLSearchParams;c.append("grant_type","authorization_code"),c.append("redirect_uri",i),c.append("code",n),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:r,"Content-Type":"application/x-www-form-urlencoded"},body:c}).then((function(e){return e.json().then((function(e){e&&(t.token_info=e,localStorage.setItem("access_token_180song",e.access_token),t.getData())}))}))}else t.login()},getTrackByCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=localStorage.getItem("access_token_180song");if(n&&e.listGenreDeactive.length>0){e.loading_get_data=!0;var a="Bearer "+n,o="https://api.spotify.com/v1/recommendations?seed_genres=",i=[],s=e.listGenreDeactive.slice(18*e.pagination,18*e.pagination+18);s.forEach((function(t){var e=encodeURIComponent(t),n=o+e;i.push(d.get(n,{headers:{Authorization:a}}))})),Promise.all(i).then((function(n){t||(e.list_recommended_song=[]),n.forEach((function(t){e.list_recommended_song.push(t.data.tracks[0])})),e.loading_get_data=!1}))}}},mounted:function(){window.app=this,this.checkData()}},g=f,p=(n("2e99"),n("2877")),m=Object(p["a"])(g,s,r,!1,null,"29955cba",null),v=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 32px"}},[a("b-navbar",{staticStyle:{background:"#171E29 !important"},attrs:{toggleable:"lg",type:"dark"}},[a("b-navbar-brand",{attrs:{href:"#"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticClass:"logo",attrs:{src:n("cf05")}}),a("span",{staticClass:"title"},[t._v("180 Songs")])])]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("div",{staticStyle:{"font-size":"32px",color:"#fff"}},[t._v("Hi, "+t._s(t.userInfo.display_name))])]),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{staticStyle:{color:"#fff!important"},attrs:{href:"#",target:"_blank"}},[t._v("Terms")]),a("b-nav-item",{staticStyle:{color:"#fff!important"},attrs:{target:"_blank",href:"https://twitter.com/activators_dev/"}},[t._v("About Us")]),a("b-nav-item",{staticStyle:{color:"#fff!important"},attrs:{target:"_blank",href:"https://activators.dev/apps/"}},[t._v("Explore Apps")])],1)],1)],1)],1)},_=[],b={name:"Header",components:{},data:function(){return{userInfo:{}}},computed:{},watch:{},methods:{},beforeDestroy:function(){this.$root.$off("getUserInfo")},mounted:function(){var t=this;this.$root.$on("getUserInfo",(function(e){t.$set(t,"userInfo",e)})).bind(this)}},y=b,S=(n("8baf"),Object(p["a"])(y,h,_,!1,null,null,null)),w=S.exports,k={name:"App",components:{Home:v,Header:w}},C=k,x=(n("034f"),Object(p["a"])(C,o,i,!1,null,null,null)),I=x.exports,P=n("bc3a"),A=n.n(P),j=n("a7fe"),$=n.n(j),O=n("5c96"),D=n.n(O),E=(n("0fae"),n("b2d6")),U=n.n(E),z=(n("3d5b"),n("5f5b")),G=n("b1e0");n("f9e3"),n("2dd8");a["default"].use(z["a"]),a["default"].use(G["a"]),a["default"].use($.a,A.a),a["default"].config.productionTip=!1,a["default"].use(D.a,{locale:U.a}),new a["default"]({render:function(t){return t(I)}}).$mount("#app")},6860:function(t,e,n){},"85ec":function(t,e,n){},"8baf":function(t,e,n){"use strict";var a=n("6860"),o=n.n(a);o.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.23a3b9f4.png"}});
//# sourceMappingURL=app.0bd5fd00.js.map